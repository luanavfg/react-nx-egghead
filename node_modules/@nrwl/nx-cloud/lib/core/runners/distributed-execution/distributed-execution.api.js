const a7_0x5d66=['throw','axiosMultipleTries','Workspace\x20is\x20disabled.\x20Cannot\x20perform\x20distributed\x20task\x20executions.','axiosException','../../../utilities/axios','maxParallel','parallel','next','getBranch','message','Completing\x20run\x20group\x20with\x20an\x20error','/nx-cloud/executions/status','error:\x20','apiAxiosInstance','createStartRequest','done','mapRespToPerfEntry','/nx-cloud/executions/start','NX_CLOUD_DISTRIBUTED_EXECUTION_AGENT_COUNT','error','defineProperty','false','project','dteStatus','stringify','serializeOverrides','configuration','completeRunGroupWithError','data','agentCount','post','../../../utilities/environment','status','exit','apply','then','recordMetric','Starting\x20a\x20distributed\x20execution','DistributedExecutionApi','createMetricRecorder','value','start','map','NX_CLOUD_DISTRIBUTED_EXECUTION_STOP_AGENTS_ON_FAILURE','../../../utilities/nx-imports','enabled','createApiAxiosInstance','target','VERBOSE_LOGGING','note','dteStart','response','RUNNER_FAILURE_PERF_ENTRY'];(function(_0x354fb0,_0x5d6689){const _0x238a8c=function(_0x5b289e){while(--_0x5b289e){_0x354fb0['push'](_0x354fb0['shift']());}};_0x238a8c(++_0x5d6689);}(a7_0x5d66,0x144));const a7_0x238a=function(_0x354fb0,_0x5d6689){_0x354fb0=_0x354fb0-0x0;let _0x238a8c=a7_0x5d66[_0x354fb0];return _0x238a8c;};'use strict';var __awaiter=this&&this['__awaiter']||function(_0x1bba21,_0x3b7468,_0x263399,_0x2a9f52){function _0x4ab5b1(_0x3078e6){return _0x3078e6 instanceof _0x263399?_0x3078e6:new _0x263399(function(_0x432d37){_0x432d37(_0x3078e6);});}return new(_0x263399||(_0x263399=Promise))(function(_0x556ef1,_0x32ee73){function _0x44b817(_0x6b3503){try{_0x275027(_0x2a9f52[a7_0x238a('0x1')](_0x6b3503));}catch(_0x200ce0){_0x32ee73(_0x200ce0);}}function _0x583ef2(_0x3b3b80){try{_0x275027(_0x2a9f52[a7_0x238a('0x2f')](_0x3b3b80));}catch(_0x1d95ef){_0x32ee73(_0x1d95ef);}}function _0x275027(_0x3e634d){_0x3e634d[a7_0x238a('0x9')]?_0x556ef1(_0x3e634d[a7_0x238a('0x22')]):_0x4ab5b1(_0x3e634d[a7_0x238a('0x22')])[a7_0x238a('0x1d')](_0x44b817,_0x583ef2);}_0x275027((_0x2a9f52=_0x2a9f52[a7_0x238a('0x1c')](_0x1bba21,_0x3b7468||[]))['next']());});};Object[a7_0x238a('0xe')](exports,'__esModule',{'value':!![]});exports[a7_0x238a('0x8')]=exports[a7_0x238a('0x20')]=void 0x0;const axios_1=require(a7_0x238a('0x33'));const environment_1=require(a7_0x238a('0x19'));const metric_logger_1=require('../../../utilities/metric-logger');const serializer_overrides_1=require('../../../utilities/serializer-overrides');const {output}=require(a7_0x238a('0x26'));class DistributedExecutionApi{constructor(_0x1abe1c){this[a7_0x238a('0x7')]=(0x0,axios_1[a7_0x238a('0x28')])(_0x1abe1c);}[a7_0x238a('0x23')](_0x3a90b2){var _0x38146b;return __awaiter(this,void 0x0,void 0x0,function*(){const _0x3e3a4e=(0x0,metric_logger_1['createMetricRecorder'])(a7_0x238a('0x2c'));let _0x1368cf;if(environment_1[a7_0x238a('0x2a')]){output[a7_0x238a('0x2b')]({'title':a7_0x238a('0x1f'),'bodyLines':[JSON[a7_0x238a('0x12')](_0x3a90b2,null,0x2)]});}try{_0x1368cf=yield(0x0,axios_1['axiosMultipleTries'])(()=>this['apiAxiosInstance']['post'](a7_0x238a('0xb'),_0x3a90b2));_0x3e3a4e[a7_0x238a('0x1e')]((0x0,metric_logger_1[a7_0x238a('0xa')])(_0x1368cf));}catch(_0xe97fb7){_0x3e3a4e['recordMetric'](((_0x38146b=_0xe97fb7===null||_0xe97fb7===void 0x0?void 0x0:_0xe97fb7[a7_0x238a('0x32')])===null||_0x38146b===void 0x0?void 0x0:_0x38146b['response'])?(0x0,metric_logger_1['mapRespToPerfEntry'])(_0xe97fb7[a7_0x238a('0x32')][a7_0x238a('0x2d')]):metric_logger_1[a7_0x238a('0x2e')]);throw _0xe97fb7;}if(!_0x1368cf[a7_0x238a('0x16')][a7_0x238a('0x27')]){throw new Error(a7_0x238a('0x31'));}if(_0x1368cf[a7_0x238a('0x16')][a7_0x238a('0xd')]){throw new Error(_0x1368cf[a7_0x238a('0x16')][a7_0x238a('0xd')]);}return _0x1368cf[a7_0x238a('0x16')]['id'];});}[a7_0x238a('0x1a')](_0x221805){var _0x5dfcb7;return __awaiter(this,void 0x0,void 0x0,function*(){const _0x33b16c=(0x0,metric_logger_1[a7_0x238a('0x21')])(a7_0x238a('0x11'));try{const _0x1c414f=yield(0x0,axios_1[a7_0x238a('0x30')])(()=>this['apiAxiosInstance'][a7_0x238a('0x18')](a7_0x238a('0x5'),{'id':_0x221805}));_0x33b16c[a7_0x238a('0x1e')]((0x0,metric_logger_1[a7_0x238a('0xa')])(_0x1c414f));return _0x1c414f[a7_0x238a('0x16')];}catch(_0x47542d){_0x33b16c[a7_0x238a('0x1e')](((_0x5dfcb7=_0x47542d===null||_0x47542d===void 0x0?void 0x0:_0x47542d[a7_0x238a('0x32')])===null||_0x5dfcb7===void 0x0?void 0x0:_0x5dfcb7[a7_0x238a('0x2d')])?(0x0,metric_logger_1['mapRespToPerfEntry'])(_0x47542d[a7_0x238a('0x32')][a7_0x238a('0x2d')]):metric_logger_1['RUNNER_FAILURE_PERF_ENTRY']);output[a7_0x238a('0xd')]({'title':_0x47542d[a7_0x238a('0x3')]});process[a7_0x238a('0x1b')](0x1);}});}[a7_0x238a('0x15')](_0x2af500,_0x472b62){var _0x5a4281;return __awaiter(this,void 0x0,void 0x0,function*(){const _0x4a5c04=(0x0,metric_logger_1[a7_0x238a('0x21')])('completeRunGroup');if(environment_1[a7_0x238a('0x2a')]){output[a7_0x238a('0x2b')]({'title':a7_0x238a('0x4'),'bodyLines':['runGroup:\x20'+_0x2af500,a7_0x238a('0x6')+_0x472b62]});}try{const _0x39dfbe=yield(0x0,axios_1['axiosMultipleTries'])(()=>this['apiAxiosInstance']['post']('/nx-cloud/executions/complete-run-group',{'runGroup':_0x2af500,'criticalErrorMessage':_0x472b62}),0x3);_0x4a5c04[a7_0x238a('0x1e')]((0x0,metric_logger_1['mapRespToPerfEntry'])(_0x39dfbe));}catch(_0xffcaf6){_0x4a5c04[a7_0x238a('0x1e')](((_0x5a4281=_0xffcaf6===null||_0xffcaf6===void 0x0?void 0x0:_0xffcaf6[a7_0x238a('0x32')])===null||_0x5a4281===void 0x0?void 0x0:_0x5a4281[a7_0x238a('0x2d')])?(0x0,metric_logger_1['mapRespToPerfEntry'])(_0xffcaf6[a7_0x238a('0x32')][a7_0x238a('0x2d')]):metric_logger_1[a7_0x238a('0x2e')]);}});}}exports['DistributedExecutionApi']=DistributedExecutionApi;function createStartRequest(_0x3751f2,_0x1ee4fd,_0x36a636){const _0xbfc8cc=_0x1ee4fd[a7_0x238a('0x24')](_0x2e5a7f=>{return _0x2e5a7f['map'](_0x9c2e66=>{return{'taskId':_0x9c2e66['id'],'hash':_0x9c2e66['hash'],'projectName':_0x9c2e66[a7_0x238a('0x29')][a7_0x238a('0x10')],'target':_0x9c2e66[a7_0x238a('0x29')]['target'],'configuration':_0x9c2e66[a7_0x238a('0x29')][a7_0x238a('0x14')]||null,'params':(0x0,serializer_overrides_1[a7_0x238a('0x13')])(_0x9c2e66)};});});const _0x2bfa15={'command':(0x0,environment_1['parseCommand'])(),'branch':(0x0,environment_1[a7_0x238a('0x2')])(),'runGroup':_0x3751f2,'tasks':_0xbfc8cc,'maxParallel':calculateMaxParallel(_0x36a636)};if(environment_1[a7_0x238a('0xc')]){_0x2bfa15[a7_0x238a('0x17')]=environment_1[a7_0x238a('0xc')];}if(!environment_1[a7_0x238a('0x25')]){_0x2bfa15['stopAgentsOnFailure']=![];}return _0x2bfa15;}exports['createStartRequest']=createStartRequest;function calculateMaxParallel(_0x5c2c7c){if(_0x5c2c7c[a7_0x238a('0x0')]===a7_0x238a('0xf')||_0x5c2c7c['parallel']===![]){return 0x1;}else if(_0x5c2c7c[a7_0x238a('0x0')]==='true'||_0x5c2c7c[a7_0x238a('0x0')]===!![]){return Number(_0x5c2c7c[a7_0x238a('0x34')]||0x3);}else if(_0x5c2c7c[a7_0x238a('0x0')]===undefined){return _0x5c2c7c[a7_0x238a('0x34')]?Number(_0x5c2c7c[a7_0x238a('0x34')]):0x3;}else{return Number(_0x5c2c7c[a7_0x238a('0x0')])||0x3;}}